
Этот проект реализует MQTT-клиент для публикации и подписки на сообщения. Он включает клиент для отправки сообщений и подписчик для их получения. Библиотека MQTTnet обеспечивает взаимодействие с MQTT-брокером, поддерживается шифрование SSL/TLS.

Основные компоненты:
Класс Mqtt отвечает за подключение к брокеру, публикацию и подписку на темы.

- Инициализация: Конструктор принимает настройки подключения (MqttConnectionSettings) и инициализирует параметры сериализации JSON (игнорирование регистра, форматирование, camelCase, сериализация полей, игнорирование null-значений).

- SSL/TLS: Если указан протокол SSL/TLS (mqttSettings.SslProtocol), устанавливается безопасное соединение. Используется сертификат rootCA.crt, с обработкой ошибок валидации сертификата, включая отключение проверки отзыва и дополнительных проверок при необходимости.

- Подписка: Метод Subscribe подписывает клиента на указанную тему (topic) с заданным уровнем качества обслуживания (qualityOfServiceLevel).

Этот код описывает три компонента приложения, использующего протокол MQTT: издатель (Publisher), подписчик (Subscriber) и общий модуль Mqtt (вероятно, содержащий клиент MQTT).

1. Общий модуль Mqtt:
Предоставляет метод PublishAsync для публикации сообщений в указанную тему (topic). Метод поддерживает три формата данных: JSON, текст и бинарные данные. JSON-сериализация осуществляется с помощью JsonSerializer. В случае бинарных данных, метод проверяет, что передаваемые данные действительно являются массивом байт (byte[]). Если клиент MQTT не инициализирован (managedMqttClient == null), вызывается метод BuildAsync() для его создания. Сообщение отправляется в очередь клиента с помощью managedMqttClient.EnqueueAsync(). Ведется логирование отправленных сообщений.

2. MQTT-издатель (Publisher):
Это консольное приложение, считывающее сообщения с консоли и публикующее их в тему, указанную в файле конфигурации (appsettings.json). Работает в цикле до тех пор, пока пользователь не введет команду "exit". Использует метод PublishAsync из модуля Mqtt для отправки сообщений.

3. MQTT-подписчик (Subscriber):
Это консольное приложение, подписывающееся на указанную в конфигурации (appsettings.json) тему и ожидающее получения сообщений от брокера MQTT. Использует метод Subscribe (из модуля Mqtt, детали не показаны) для подписки на тему с заданным уровнем QoS. (Обратите внимание, что обработка полученных сообщений не показана в коде).

Работа программы:
![image](https://github.com/user-attachments/assets/84b532fa-7bae-4830-aa3b-ced7c104b588)

